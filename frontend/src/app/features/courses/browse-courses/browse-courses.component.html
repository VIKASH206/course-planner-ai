<div class="p-4 bg-gradient-to-br from-purple-50 to-pink-50 min-h-screen">
  <div class="max-w-7xl mx-auto">
    
    <!-- Header -->
    <div class="mb-4 bg-white p-4 rounded-lg shadow border-l-4 border-purple-600">
      <h1 class="text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600 mb-2">
        ğŸ“ Browse Courses
      </h1>
      <p class="text-sm text-gray-600 mb-3">Discover courses tailored to your learning journey</p>
      <button (click)="openAIChatbot()" class="px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm font-semibold rounded-lg hover:from-purple-700 hover:to-pink-700 transform hover:scale-105 transition-all shadow">
        ğŸ¤– Find Perfect Course
      </button>
    </div>

    <!-- Search & Filters -->
    <div class="mb-4 bg-white p-4 rounded-lg shadow border-t-4 border-purple-500">
      <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
        <span class="text-2xl">ğŸ”</span>
        Search & Filter
      </h3>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-3">
        <input 
          type="text" 
          [ngModel]="searchQuery()" 
          (ngModelChange)="searchQuery.set($event)"
          placeholder="Search courses..."
          class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm text-gray-900 placeholder-gray-400">
        
        <select 
          [ngModel]="selectedCategory()" 
          (ngModelChange)="selectedCategory.set($event)"
          class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm text-gray-900">
          <option value="" class="text-gray-500">ğŸ“‚ Select Category</option>
          <option *ngFor="let cat of categories" [value]="cat">{{cat}}</option>
        </select>
        
        <select 
          [ngModel]="selectedDifficulty()" 
          (ngModelChange)="selectedDifficulty.set($event)"
          class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm text-gray-900">
          <option value="" class="text-gray-500">ğŸ“Š Select Level</option>
          <option *ngFor="let diff of difficulties" [value]="diff">{{diff}}</option>
        </select>
        
        <button (click)="clearFilters()" class="px-4 py-2 bg-pink-600 text-white text-sm rounded-lg hover:bg-pink-700 transition-all">
          Clear Filters
        </button>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading()" class="bg-white p-8 rounded-lg shadow-xl text-center border-2 border-purple-400">
      <div class="text-4xl mb-3 animate-bounce">â³</div>
      <p class="text-xl font-bold text-purple-600">Loading Courses...</p>
      <p class="text-gray-600 mt-2 text-sm">Please wait...</p>
      <p class="text-xs text-gray-500 mt-2">If this takes too long, check if backend is running on port 8081</p>
    </div>
    
    <!-- Error State -->
    <div *ngIf="!loading() && courses().length === 0" class="bg-white p-8 rounded-lg shadow-xl text-center border-2 border-red-400">
      <div class="text-4xl mb-3">âš ï¸</div>
      <p class="text-xl font-bold text-red-600">No Courses Available</p>
      <p class="text-gray-600 mt-2 text-sm">The backend may not be running or there are no courses in the database.</p>
      <p class="text-xs text-gray-500 mt-2">Check: http://localhost:8081/api/courses</p>
    </div>

    <!-- All Courses -->
    <div *ngIf="!loading()">
      <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
        <span class="text-2xl">ğŸ“š</span>
        All Courses ({{filteredCourses().length}})
      </h3>
      
      <div *ngIf="filteredCourses().length === 0" class="bg-white p-8 rounded-lg shadow text-center">
        <div class="text-4xl mb-2">ğŸ“­</div>
        <p class="text-gray-500">No courses found matching your filters</p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <div *ngFor="let course of filteredCourses()" 
             class="bg-white rounded-lg shadow hover:shadow-xl transform hover:scale-105 transition-all cursor-pointer border-2 border-pink-200 overflow-hidden"
             (click)="viewCourseDetails(course)">
          
          <!-- Course Image -->
          <div class="relative">
            <div *ngIf="course.thumbnail || course.imageUrl" class="h-48 overflow-hidden">
              <img [src]="course.thumbnail || course.imageUrl" 
                   [alt]="course.title"
                   class="w-full h-full object-cover"
                   loading="lazy">
            </div>
            
            <div *ngIf="!course.thumbnail && !course.imageUrl" class="h-48 bg-gradient-to-br from-pink-500 via-purple-500 to-blue-600 flex items-center justify-center">
              <span class="text-6xl">{{getCourseIcon(course.category)}}</span>
            </div>
            
            <!-- Difficulty Badge -->
            <div class="absolute bottom-3 left-3 bg-white/90 backdrop-blur-sm text-gray-800 font-semibold px-3 py-1 rounded-full text-xs">
              {{course.difficulty}}
            </div>
            
            <!-- Category Badge -->
            <div class="absolute top-3 right-3 bg-blue-500 text-white px-2 py-1 rounded-full text-xs">
              {{course.category}}
            </div>
          </div>
          
          <div class="p-4">
            <h4 class="font-bold text-sm text-gray-800 mb-2 line-clamp-2 min-h-[40px]">{{course.title}}</h4>
            <p class="text-xs text-gray-600 mb-3 line-clamp-2">{{course.description}}</p>
            <p class="text-xs text-gray-500 mb-3">By {{course.instructor}}</p>
            
            <div class="flex items-center justify-between mb-3 gap-2">
              <span class="text-xs text-gray-500">â±ï¸ {{course.estimatedTime || course.duration}}h</span>
              <span *ngIf="course.studentsCount" class="text-xs text-gray-500">ğŸ‘¥ {{course.studentsCount}}+</span>
            </div>
            
            <div class="flex items-center text-sm mb-3">
              <span class="text-yellow-500">â­</span>
              <span class="font-bold text-gray-900 ml-1">{{course.rating || 4.5}}</span>
            </div>
            
            <div class="flex gap-2">
              <button (click)="openAIChatbotWithCourse(course, $event)" class="flex-1 px-3 py-2 bg-purple-600 text-white text-xs rounded-lg hover:bg-purple-700 transition-all flex items-center justify-center gap-1">
                <span>ğŸ¤–</span>
                <span>Ask AI</span>
              </button>
              <button (click)="viewCourseContent(course, $event)" class="flex-1 px-3 py-2 bg-blue-600 text-white text-xs rounded-lg hover:bg-blue-700 transition-all flex items-center justify-center gap-1">
                <span>ğŸ“š</span>
                <span>View Content</span>
              </button>
              <button (click)="enrollInCourse(course, $event)" class="flex-1 px-3 py-2 bg-pink-600 text-white text-xs rounded-lg hover:bg-pink-700 transition-all">
                Enroll
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
